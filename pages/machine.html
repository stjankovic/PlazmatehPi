<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Plazmateh IPC</title>
    <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline';" />
    <link rel="shortcut icon" href="../img/favicon.png" type="image/png">
    <link href="../node_modules/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="../styles.css">
</head>

<body>

    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="fixed-item">
            <svg id="openHiddenWindow" xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="black"
                class="bi bi-list" viewBox="0 0 16 16">
                <path fill-rule="evenodd"
                    d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5" />
            </svg>
        </div>

        <a class="navbar-brand" id="cur-dis">
            <img src="../img/Plazmateh.png" alt="Logo" height="25" draggable="false">
        </a>

        <div id="clock"></div>
    </nav>

    <!-- Hidden window content -->
    <div id="hiddenWindow">
        <div class="fixed-item">
            <svg onclick="closeHiddenWindow();" xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="black"
                class="bi bi-x-lg" viewBox="0 0 16 16">
                <path
                    d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8z" />
            </svg>
        </div>
        <!-- fixed-item -->
        <button id="exitButton" type="button" class="btn btn-danger">Exit Application</button><br>
        <div class="">Plazmateh IPC</div>
        <div class="">ver 01.00.</div>

    </div>

    <div id="mainview" class="container-fluid">
        <div id="rrow" class="row">
            <div class="col-md-1" style="background-color: #d4d4d4;">
                <!-- MENU -->
                <ul class="list-group border-0 py-1">
                    <li id="changeMachine" class="list-group-item border-0 py-1 my-1 fs-6">MACHINE</li>
                    <li id="changeParameters" class="list-group-item border-0 py-1 my-1 fs-6">PARAMETERS</li>
                    <li id="changeAlarms" class="list-group-item border-0 py-1 my-1 fs-6">ALARMS</li>
                    <li id="changeLimits" class="list-group-item border-0 py-1 my-1 fs-6">LIMITS</li>
                    <li id="changeRecipes" class="list-group-item border-0 py-1 my-1 fs-6">RECIPES</li>
                    <li id="changeNetwork" class="list-group-item border-0 py-1 my-1 fs-6">NETWORK</li>
                    <li id="changeDevices" class="list-group-item border-0 py-1 my-1 fs-6">DEVICES</li>
                    <li id="changeSettings" class="list-group-item border-0 py-1 my-1 fs-6">SETTINGS</li>
                    <li id="changeLicense" class="list-group-item border-0 py-1 my-1 fs-6">LICENSE</li>
                </ul>
                
            </div>
            <div class="col-sm-10" style="background-color: #d4d4d4;">
                <div id="mainMachine" class="container mt-5 mb-5 pb-5 text-center">
                    <!-- GLAVNI PRIKAZ -->

                    <div class="container">


                        <div id="mainParam" class="container rounded" style="background-color: #f8f9fa; padding: 20px;">
                            <div class="row justify-content-center">
                                <div class="col-md-2 text-left">
                                    <p id="parameterNameDisplay_1"></p>
                                    <p id="parameterNameDisplay_2"></p>
                                    <p id="parameterNameDisplay_3"></p>
                                    <p id="parameterNameDisplay_4"></p>
                                    <p id="parameterNameDisplay_5"></p>
                                    <p id="parameterNameDisplay_6"></p>
                                    <p id="parameterNameDisplay_7"></p>
                                    <p id="parameterNameDisplay_8"></p>
                                    <p id="parameterNameDisplay_9"></p>
                                    <p id="parameterNameDisplay_10"></p>
                                </div>
                                <div class="col-md-1 text-right">
                                    <p id="parameterValueDisplay_1"></p>
                                    <p id="parameterValueDisplay_2"></p>
                                    <p id="parameterValueDisplay_3"></p>
                                    <p id="parameterValueDisplay_4"></p>
                                    <p id="parameterValueDisplay_5"></p>
                                    <p id="parameterValueDisplay_6"></p>
                                    <p id="parameterValueDisplay_7"></p>
                                    <p id="parameterValueDisplay_8"></p>
                                    <p id="parameterValueDisplay_9"></p>
                                    <p id="parameterValueDisplay_10"></p>
                                </div>
                                <div class="col-md-6 image-column">
                                    <img src="../img/machine.png" alt="Machine" class="img-fluid">
                                </div>
                                <div class="col-md-2 text-left">
                                    <p id="parameterNameDisplay_11"></p>
                                    <p id="parameterNameDisplay_12"></p>
                                    <p id="parameterNameDisplay_13"></p>
                                    <p id="parameterNameDisplay_14"></p>
                                    <p id="parameterNameDisplay_15"></p>
                                    <p id="parameterNameDisplay_16"></p>
                                    <p id="parameterNameDisplay_17"></p>
                                    <p id="parameterNameDisplay_18"></p>
                                    <p id="parameterNameDisplay_19"></p>
                                    <p id="parameterNameDisplay_20"></p>
                                </div>
                                <div class="col-md-1 text-right">
                                    <p id="parameterValueDisplay_11"></p>
                                    <p id="parameterValueDisplay_12"></p>
                                    <p id="parameterValueDisplay_13"></p>
                                    <p id="parameterValueDisplay_14"></p>
                                    <p id="parameterValueDisplay_15"></p>
                                    <p id="parameterValueDisplay_16"></p>
                                    <p id="parameterValueDisplay_17"></p>
                                    <p id="parameterValueDisplay_18"></p>
                                    <p id="parameterValueDisplay_19"></p>
                                    <p id="parameterValueDisplay_20"></p>
                                </div>
                            </div>
                        </div>

                        <div id="cycle-table" class="container rounded mt-4" style="background-color: #f8f9fa; padding: 20px;">
                            <div class="row justify-content-center">
                                <div class="col-md-12"> <!-- Use full width for the table -->
                                    <table id="cycle-table" class="table table-bordered">
                                        <tbody>
                                            <tr>
                                                <td style="width: 100px;">Step 1</td>
                                                <td>Machine Setup State</td>
                                                <td>STATUS: DONE</td>
                                            </tr>
                                            <tr class="highlighted-row"> <!-- Add the class to highlight this row -->
                                                <td class="highlighted-row">Step 2</td>
                                                <td class="highlighted-row">Loading in place</td>
                                                <td class="highlighted-row">STATUS: RUNNING</td>
                                            </tr>
                                            <tr>
                                                <td>Step 3</td>
                                                <td>Gripping</td>
                                                <td>STATUS: PENDING</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <div class="container rounded mt-4" style="background-color: #f8f9fa; padding: 20px;">
                            <div class="row justify-content-center">
                                <div class="col-md-10"> <!-- Divide the container into 10 equal parts -->
                                    <div class="row justify-content-center"> <!-- Center the buttons -->
                                        <div class="col-md-2">
                                            <button type="button" class="btn btn-success custom-btn btn-lg">START</button>
                                        </div>
                                        <div class="col-md-2">
                                            <button type="button" class="btn btn-secondary custom-btn btn-md ml-5">Cycle Start</button> <!-- Increased margin to ml-5 -->
                                        </div>
                                        <div class="col-md-2">
                                            <button type="button" class="btn btn-secondary custom-btn btn-md ml-5">Set Speed</button> <!-- Increased margin to ml-5 -->
                                        </div>
                                        <div class="col-md-2">
                                            <button type="button" class="btn btn-secondary custom-btn btn-md ml-5">Set Temperature</button> <!-- Increased margin to ml-5 -->
                                        </div>
                                        <div class="col-md-2">
                                            <button type="button" class="btn btn-warning custom-btn btn-md ml-5" style="color: black !important">SAFETY RESET</button> <!-- Increased margin to ml-5 -->
                                        </div>
                                    </div>
                                    <div class="row justify-content-center pt-4 mt-2"> <!-- Center the buttons -->
                                        <div class="col-md-2">
                                            <button type="button" class="btn btn-danger custom-btn btn-lg">STOP</button>
                                        </div>
                                        <div class="col-md-2">
                                            <button type="button" class="btn btn-secondary custom-btn btn-md ml-5">Cycle Stop</button> <!-- Increased margin to ml-5 -->
                                        </div>
                                        <div class="col-md-2">
                                            <button type="button" class="btn btn-danger custom-btn btn-md ml-5">ESTOP</button> <!-- Increased margin to ml-5 -->
                                        </div>
                                        <div class="col-md-2">
                                            <button type="button" class="btn btn-info custom-btn btn-md ml-5" style="color: black !important">ALARM LIST</button> <!-- Increased margin to ml-5 -->
                                        </div>
                                        <div class="col-md-2">
                                            <button type="button" class="btn btn-warning custom-btn btn-md ml-5"style="color: black !important">ALARM RESET</button> <!-- Increased margin to ml-5 -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="../scripts/pop-menu.js"></script>
    <script src="../scripts/clock.js"></script>
    <script src="../scripts/renderer.js"></script>
    <script src="../node_modules/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        window.onload = function() {
          var tableRows = document.getElementById("cycle-table").getElementsByTagName("tr");
          var middleRow = Math.floor(tableRows.length / 2); // Get the index of the middle row
          tableRows[middleRow].style.backgroundColor = "yellow"; // Apply background color to the middle row
        };
    </script>
    <script>
        // Get the query parameters from the URL
        const urlParams = new URLSearchParams(window.location.search);

        // Get the value of the 'lastRecord' parameter and parse it as JSON
        const lastRecordParam = urlParams.get('lastRecord');
        const lastRecord = JSON.parse(lastRecordParam);

        // Update parameter names
        for (let i = 1; i <= 20; i++) {
            document.getElementById(`parameterNameDisplay_${i}`).textContent = lastRecord[`parameterName_${String(i).padStart(2, '0')}`];
        }

        // Update parameter values
        for (let i = 1; i <= 20; i++) {
            document.getElementById(`parameterValueDisplay_${i}`).textContent = lastRecord[`parameterVal_${String(i).padStart(2, '0')}`];
        }
    </script>

</body>

</html>
