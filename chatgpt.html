<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plazmateh IPC</title>
    <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline';">
    <link rel="shortcut icon" href="favicon.png" type="image/png">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="./styles.css">
    <style>
        /* Custom styles */
        body {
            background-color: #f8f9fa;
            font-family: Arial, sans-serif;
        }

        .navbar-brand img {
            max-height: 40px;
        }

        .fixed-item {
            position: absolute;
            top: 10px;
            left: 10px;
        }

        .highlighted-row {
            background-color: #f0ad4e !important;
            color: #fff;
        }

        .custom-btn {
            width: 150px;
            height: 70px;
            font-weight: 600;
        }

        @media (max-width: 576px) {
            .custom-btn {
                width: 100%;
                margin-bottom: 10px;
            }
        }
    </style>
</head>

<body>

    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container">
            <div class="fixed-item">
                <svg id="openHiddenWindow" xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="black"
                    class="bi bi-list" viewBox="0 0 16 16">
                    <path fill-rule="evenodd"
                        d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5" />
                </svg>
            </div>
            <a class="navbar-brand" href="#">
                <img src="Plazmateh.png" alt="Logo" height="25" draggable="false">
            </a>
            <div id="clock"></div>
        </div>
    </nav>

    <!-- Hidden window content -->
    <div id="hiddenWindow" style="display: none;">
        <div class="fixed-item">
            <svg onclick="closeHiddenWindow();" xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="black"
                class="bi bi-x-lg" viewBox="0 0 16 16">
                <path
                    d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8z" />
            </svg>
        </div>
        <button id="exitButton" type="button" class="btn btn-danger">Exit Application</button><br>
        <div class="">Plazmateh IPC</div>
        <div class="">ver 01.00.</div>
    </div>

    <!-- Main content -->
    <div id="mainview" class="container-fluid">
        <div id="rrow" class="row">
            <div class="col-sm-1" style="background-color: rgb(248,249,250);">
                <!-- Menu -->
                <ul class="list-group border-0 py-1">
                    <li id="changeStrana1" class="list-group-item border-0 py-2 my-2">PERFORATION</li>
                    <li id="changeStrana2" class="list-group-item border-0 py-2 my-2">PARAMETERS</li>
                    <li id="changeStrana2" class="list-group-item border-0 py-2 my-2">ALARMS</li>
                    <li id="changeStrana2" class="list-group-item border-0 py-2 my-2">LIMITS</li>
                    <li id="changeStrana3" class="list-group-item border-0 py-2 my-2">RECIPES</li>
                    <li id="changeStrana4" class="list-group-item border-0 py-2 my-2">SETTINGS</li>
                    <li id="changeStrana5" class="list-group-item border-0 py-2 my-2">LICENSE</li>
                </ul>
            </div>
            <div class="col-sm-11" style="background-color: #cccccc;">
                <div id="mainMachine" class="container mt-5 mb-5 pb-5 text-center">
                    <!-- Main display -->
                    <div class="container">
                        <!-- Parameter display -->
                        <div class="container rounded" style="background-color: #f8f9fa; padding: 20px;">
                            <div class="row justify-content-center">
                                <div class="col-md-2 text-left">
                                    <!-- Dynamically generated parameter names -->
                                    <!-- Example: <p id="parameterNameDisplay_1"></p> -->
                                </div>
                                <div class="col-md-1 text-right">
                                    <!-- Dynamically generated parameter values -->
                                    <!-- Example: <p id="parameterValueDisplay_1"></p> -->
                                </div>
                                <div class="col-md-6 image-column">
                                    <img src="machine.png" alt="Machine" class="img-fluid">
                                </div>
                                <div class="col-md-2 text-left">
                                    <!-- Dynamically generated parameter names -->
                                    <!-- Example: <p id="parameterNameDisplay_11"></p> -->
                                </div>
                                <div class="col-md-1 text-right">
                                    <!-- Dynamically generated parameter values -->
                                    <!-- Example: <p id="parameterValueDisplay_11"></p> -->
                                </div>
                            </div>
                        </div>

                        <!-- Cycle table -->
                        <div id="cycle-table" class="container rounded mt-4" style="background-color: #f8f9fa; padding: 20px;">
                            <div class="row justify-content-center">
                                <div class="col-md-12">
                                    <table id="cycle-table" class="table table-bordered">
                                        <tbody>
                                            <!-- Dynamically generated table rows -->
                                            <!-- Example: <tr><td>Step 1</td><td>Machine Setup State</td><td>STATUS: DONE</td></tr> -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <!-- Button section -->
                        <div class="container rounded mt-4" style="background-color: #f8f9fa; padding: 20px;">
                            <div class="row justify-content-center">
                                <div class="col-md-10">
                                    <div class="row justify-content-center">
                                        <!-- Dynamically generated buttons -->
                                        <!-- Example: <button type="button" class="btn btn-success custom-btn btn-lg">START</button> -->
                                    </div>
                                    <div class="row justify-content-center pt-4 mt-2">
                                        <!-- Dynamically generated buttons -->
                                        <!-- Example: <button type="button" class="btn btn-danger custom-btn btn-lg">STOP</button> -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="pop-menu.js"></script>
    <script src="clock.js"></script>
    <script src="renderer.js"></script>
    <script>
        window.onload = function () {
            var tableRows = document.getElementById("cycle-table").getElementsByTagName("tr");
            var middleRow = Math.floor(tableRows.length / 2); // Get the index of the middle row
            tableRows[middleRow].classList.add("highlighted-row"); // Apply class to highlight the middle row
        };
    </script>
    <script>
        // Get the query parameters from the URL
        const urlParams = new URLSearchParams(window.location.search);

        // Get the value of the 'lastRecord' parameter and parse it as JSON
        const lastRecordParam = urlParams.get('lastRecord');
        const lastRecord = JSON.parse(lastRecordParam);

        // Update parameter names
        for (let i = 1; i <= 20; i++) {
            document.getElementById(`parameterNameDisplay_${i}`).textContent = lastRecord[`parameterName_${String(i).padStart(2, '0')}`];
        }

        // Update parameter values
        for (let i = 1; i <= 20; i++) {
            document.getElementById(`parameterValueDisplay_${i}`).textContent = lastRecord[`parameterVal_${String(i).padStart(2, '0')}`];
        }
    </script>
</body>

</html>
